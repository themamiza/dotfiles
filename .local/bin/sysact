#!/bin/sh

# Get WM:
# WM="$(wmctrl -m | awk 'NR==1{print $2}')"
WM="dwm"

wmpid()
{
	tree="$(pstree -ps $$)"
	tree="${tree#*$WM(}"
	echo "${tree%%)*}"
}

case "$(printf "ğŸ”’ Lockdown\nğŸšª Leave $WM\nğŸªŸ Restart $WM\nğŸ’¤ Suspend\nğŸ» Hibernate\nğŸ”ƒ Reboot\nğŸ’» Shutdown\nğŸ“º Display off\nâ° Uptime" | dmenu -i -p "Action: ")" in
	"ğŸ”’ Lockdown") notify-send "Locking down" && sleep 2 && slock;;
	"ğŸšª Leave $WM") kill -TERM "$(wmpid)";;
	"ğŸªŸ Restart $WM") kill -HUP "$(wmpid)";;
	"ğŸ’¤ Suspend") slock systemctl suspend -i;;
	"ğŸ» Hibernate") slock systemctl hibernate -i;;
	"ğŸ”ƒ Reboot") notify-send "Rebooting the system" && sleep 2 && reboot;;
	"ğŸ’» Shutdown") notify-send "Going down" && sleep 2 && shutdown -h now;;
	"ğŸ“º Display off") xset dpms force off;;
	"â° Uptime") notify-send "$(uptime -p)" ;;
	*) exit 1;;
esac
